# To-Do - 15/07/2025

## ‚úÖ **IMPLEMENTADO HOJE (15/07/2025)**

### Aging Configur√°vel + Drill-down Completo
- ‚úÖ **Faixas derivadas do PDD**: Sistema usa `provisoes_pdd.grupos_risco` de cada pool
- ‚úÖ **Up Vendas testado**: 8 faixas (1-15, 16-30, 31-60, 61-90, 91-120, 121-150, 151-180, 181+)
- ‚úÖ **Drill-down de ativos**: `detalhes_ativos_df` como DataFrame ordenado
- ‚úÖ **Ordena√ß√£o inteligente**: cedente (A-Z), vencimento (antigo primeiro), valor (maior primeiro)
- ‚úÖ **Compatibilidade**: Mant√©m `detalhes_ativos` como lista + novo DataFrame

### Documenta√ß√£o Limita√ß√£o CCB
- ‚úÖ **Monitor PDD atualizado**: Docstring com explica√ß√£o completa sobre CCB
- ‚úÖ **CLAUDE.md**: Se√ß√£o "Limita√ß√µes Conhecidas - CCB" adicionada
- ‚úÖ **PRD.md**: Funcionalidades recentes documentadas + limita√ß√£o CCB
- ‚úÖ **Documenta√ß√£o t√©cnica**: `/docs/technical/LOGICA_CCB_PDD.md` criado
- ‚úÖ **Status claro**: CCB n√£o implementada, sistema funciona apenas por cedente

### Arquivos Modificados
- `/monitor/base/monitor_inadimplencia.py` - Aging configur√°vel + drill-down
- `/monitor/base/monitor_pdd.py` - Docstring com limita√ß√£o CCB
- `/docs/CLAUDE.md` - Se√ß√µes atualizadas com novas funcionalidades
- `/docs/PRD.md` - Funcionalidades 2025-07-15 documentadas
- `/docs/technical/LOGICA_CCB_PDD.md` - Documenta√ß√£o t√©cnica CCB (novo)
- `/docs/sessions/to_do_20250715.md` - M√©tricas atualizadas

### Reorganiza√ß√£o de Arquivos (2025-07-15)
- ‚ùå **Removidos**: `config/monitoring/exampl_test_pools.json`, `example_ignore_pools.json`
- üìÅ **Movidos**: `docs/SYSTEM_STATE.md` ‚Üí `docs/technical/SYSTEM_STATE.md`
- üìÅ **Movidos**: `tests/test_*.py` ‚Üí `tests/integration/` (2 arquivos)
- üìö **Atualizados**: Refer√™ncias em CLAUDE.md, FRAMEWORK_DAILY_SYNC.md
- üéØ **Resultado**: Estrutura 90% otimizada e bem organizada

## ‚úÖ **REFATORA√á√ÉO COMPLETA (15/07/2025)**

### Melhorias de C√≥digo Implementadas
- ‚úÖ **Padroniza√ß√£o de nomenclatura**: `normalizar_nome_coluna` ‚Üí `normalize_column_name`
- ‚úÖ **Corre√ß√£o de bugs cr√≠ticos**: Nomes de colunas em `monitor_concentracao.py` corrigidos
- ‚úÖ **Logging estruturado**: Substitui√ß√£o de `print()` por `log_alerta()` em todo o sistema
- ‚úÖ **Type hints**: Adicionadas annotations para melhor IDE support
- ‚úÖ **Performance**: Convers√µes vetorizadas priorizadas sobre `.apply()`
- ‚úÖ **Documenta√ß√£o**: CLAUDE.md atualizado com transforma√ß√µes de dados cr√≠ticas

### Transforma√ß√µes de Dados Documentadas
- ‚úÖ **Normaliza√ß√£o de colunas**: `'Nome do Sacado'` ‚Üí `'nome_do_sacado'`
- ‚úÖ **Convers√µes monet√°rias**: `'R$ 1.234,56'` ‚Üí `1234.56` (float)
- ‚úÖ **Convers√µes percentuais**: `'25,5%'` ‚Üí `0.255` (decimal)
- ‚úÖ **Performance otimizada**: Vetoriza√ß√£o para datasets >1000 registros

## ‚úÖ **MONITOR DE CONCENTRA√á√ÉO IMPLEMENTADO (15/07/2025)**

### Building Blocks Completados
- ‚úÖ **Building Block 1**: An√°lise dos padr√µes de concentra√ß√£o nos JSONs existentes
  - 4 tipos identificados: individual, top_n, lista_especifica, ausente
  - 2 entidades: sacado, cedente
  - 3 m√©todos: simples, 8_digitos_cnpj_raiz, grupo_economico
- ‚úÖ **Building Block 2**: Classe `ConcentrationConfig` - Parser de configura√ß√µes
- ‚úÖ **Building Block 3**: Estrat√©gia `IndividualConcentration` - Concentra√ß√£o por entidade
- ‚úÖ **Building Block 4**: Estrat√©gia `TopNConcentration` - Concentra√ß√£o Top-N
- ‚úÖ **Building Block 6**: Fun√ß√£o `run_concentration_monitoring()` - Interface padr√£o
- ‚úÖ **Building Block 7**: Integra√ß√£o com orquestrador - Execu√ß√£o condicional
- ‚úÖ **Building Block 8**: Testes com pools reais - Valida√ß√£o de c√°lculos

### Arquitetura Simplificada Implementada
- ‚úÖ **Consolida√ß√£o**: 3 arquivos ‚Üí 1 arquivo (`monitor_concentracao.py`)
- ‚úÖ **Remo√ß√£o grupo_economico**: L√≥gica removida do monitor base
- ‚úÖ **Arquivos movidos**: `concentration_config.py` e `concentration_strategies.py` ‚Üí `/custom/`
- ‚úÖ **Documenta√ß√£o**: 150+ linhas de docs no arquivo principal
- ‚úÖ **JSONs atualizados**: Removido `inclui_grupo_economico` de AFA e LeCapital
- ‚úÖ **UnionNational Pool #5**: JSON criado e configurado corretamente

### Documenta√ß√£o Atualizada
- ‚úÖ **README.md dos pools**: Template simplificado
- ‚úÖ **monitor_concentracao.py**: Documenta√ß√£o completa com exemplos
- ‚úÖ **CLAUDE.md**: Se√ß√£o nova sobre arquitetura simplificada
- ‚úÖ **Status atualizado**: 6/7 monitores base (86% completo)

## ‚úÖ **AN√ÅLISE E-CTARE POOL #1 (15/07/2025)**

### An√°lise Detalhada do Pool E-ctare Pool #1
- ‚úÖ **JSON estruturado**: Configura√ß√£o completa v2.2 baseada na escritura original
- ‚úÖ **Compatibilidade**: Segue template padr√£o, todas as se√ß√µes preenchidas
- ‚úÖ **Monitores base**: 7 monitores base configurados (subordina√ß√£o, concentra√ß√£o, etc.)
- ‚úÖ **Identifica√ß√£o agroneg√≥cio**: Pool focado em pecu√°ria leiteira, caf√© e gr√£os
- ‚úÖ **Caracter√≠sticas especiais**: Garantias CDA/WA, cess√µes diretas, cronograma redutivo

### Monitores Customizados Identificados (6 novos)
- ‚úÖ **`ectare_pool_1_agronegocio.py`**: Valida√ß√£o de opera√ß√µes do agroneg√≥cio
  - Tipos: duplicata mercantil performada, CPR financeira registrada
  - Setores: pecu√°ria leiteira, caf√©, gr√£os com regras espec√≠ficas
- ‚úÖ **`ectare_pool_1_cda_wa_garantias.py`**: Garantias CDA/WA obrigat√≥rias
  - Caf√©: M√≠nimo 130% de garantia CDA/WA
  - Valida√ß√£o de cobertura e registro
- ‚úÖ **`ectare_pool_1_cessoes_diretas.py`**: Cess√µes diretas obrigat√≥rias
  - Obrigat√≥rias ap√≥s per√≠odo de forma√ß√£o (15 dias)
  - Controle de compliance temporal
- ‚úÖ **`ectare_pool_1_setores_agricolas.py`**: Concentra√ß√£o por setores
  - Pecu√°ria leiteira: direito regresso opcional
  - Caf√©: garantias CDA/WA obrigat√≥rias
  - Gr√£os: direito regresso integral obrigat√≥rio
- ‚úÖ **`ectare_pool_1_ancoras_eligible.py`**: Sistema de √¢ncoras pr√©-aprovadas
  - Lista de 13 sacados eleg√≠veis: PRIME, AVIA√á√ÉO, BUENO CAFE, etc.
  - Valida√ß√£o contra lista de aprovados
- ‚úÖ **`ectare_pool_1_prazo_medio_redutivo.py`**: Cronograma redutivo customizado
  - Ano 1: 300 dias m√°ximo
  - Ano 2: 240 dias m√°ximo
  - Semestre 1 do Ano 3: 180 dias m√°ximo
  - Semestre 2 do Ano 3: 120 dias m√°ximo

### Caracter√≠sticas T√©cnicas Espec√≠ficas
- ‚úÖ **Estrutura financeira**: R$ 10MM (Senior: R$ 8MM, Subordinada: R$ 2MM)
- ‚úÖ **Cronograma**: 12 meses car√™ncia + 24 meses amortiza√ß√£o
- ‚úÖ **Concentra√ß√£o**: 6,66% por sacado com grupo econ√¥mico
- ‚úÖ **Inadimpl√™ncia**: 3% m√°ximo aos 90 dias
- ‚úÖ **Subordina√ß√£o**: M√≠nimo 20%, cr√≠tico 15%
- ‚úÖ **Raz√£o garantia**: M√≠nimo 95%

### Integra√ß√£o com Sistema
- ‚úÖ **Arquivos necess√°rios**: 6 monitores customizados identificados
- ‚úÖ **Configura√ß√£o JSON**: Estrutura padr√£o v2.2 compat√≠vel
- ‚úÖ **Sistema descoberta**: Pronto para implementa√ß√£o autom√°tica
- ‚úÖ **Prioridade**: M√©dia - implementa√ß√£o ap√≥s monitores base restantes

## ‚úÖ **ESTRUTURA H√çBRIDA PROCESSOS LEGAIS IMPLEMENTADA (15/07/2025)**

### PROBLEMA CR√çTICO RESOLVIDO
- ‚úÖ **Union Pool #5 corrigido**: Top 10 Cedentes `60% ‚Üí 70%` (linha 161 do JSON)
- ‚úÖ **Base legal**: 2¬∫ Aditamento Jun/2025 documentado no JSON
- ‚úÖ **Impacto**: Sistema parava de gerar falsos alarmes

### ESTRUTURA H√çBRIDA IMPLEMENTADA
- ‚úÖ **Arquitetura dual**: `triggers_aceleracao` (sistema) + `processos_legais` (compliance)
- ‚úÖ **Union Pool #5**: Piloto completo com nova estrutura h√≠brida
- ‚úÖ **Template v2.3**: README.md atualizado com se√ß√£o `processos_legais`
- ‚úÖ **Documenta√ß√£o**: CLAUDE.md com nova arquitetura h√≠brida

### NOVA SE√á√ÉO NO TEMPLATE
```json
"processos_legais": {
  "concentracao_violacao": {
    "tipo_evento": "evento_avaliacao",
    "pos_violacao": {
      "assembleia": {"convocacao_prazo_dias": 3, "responsavel": "emissora"},
      "votacao": {"votantes": "serie_senior", "maioria": "simples"},
      "renuncia": {"prazo_dias": 5, "direito_de": "serie_senior"}
    },
    "base_legal": "Anexo V, item (viii)"
  }
}
```

### BENEF√çCIOS IMPLEMENTADOS
- ‚úÖ **Auditabilidade**: Rastro legal completo nos JSONs
- ‚úÖ **Compatibilidade**: Sistema continua funcionando normalmente
- ‚úÖ **Compliance**: Processos detalhados para auditoria
- ‚úÖ **Escalabilidade**: Template padr√£o para novos pools

## ‚úÖ **AN√ÅLISE SEQUENCIAL DE CAPACIDADE IMPLEMENTADA (15/07/2025)**

### NOVA FUNCIONALIDADE NO MONITOR DE CONCENTRA√á√ÉO
- ‚úÖ **Vers√£o 2.1**: Monitor de concentra√ß√£o com an√°lise sequencial
- ‚úÖ **Capacidade Incremental**: Mostra quanto cada sacado/cedente pode crescer
- ‚úÖ **An√°lise Cascata**: Saldo restante ap√≥s cada aloca√ß√£o por prioridade
- ‚úÖ **Limita√ß√µes Identificadas**: Individual vs Top-N por posi√ß√£o

### IMPLEMENTA√á√ÉO T√âCNICA
- ‚úÖ **Fun√ß√£o `_calculate_sequential_capacity()`**: Nova an√°lise cascata
- ‚úÖ **Fun√ß√£o `_gerar_explicacao_sequencial()`**: Explica√ß√µes claras
- ‚úÖ **Integra√ß√£o autom√°tica**: Inclu√≠da nos resultados de `run_concentration_monitoring()`
- ‚úÖ **Tratamento de erros**: Continua funcionando se an√°lise falhar

### EXEMPLO DE SA√çDA IMPLEMENTADO
```json
"analises_capacidade": {
  "sacado": {
    "analise_sequencial": [
      {
        "posicao": 1,
        "entidade": "Sacado 1",
        "capacidade_efetiva": 1.0,
        "saldo_antes": 3.0,
        "saldo_apos": 2.0,
        "limitada_por": "individual",
        "explicacao": "Limitado por teto individual. Restaria 2.0 no Top-N"
      }
    ]
  }
}
```

### CASOS DE USO ATENDIDOS
- ‚úÖ **Gest√£o de Origina√ß√£o**: Saber exato quanto originar por sacado
- ‚úÖ **Planejamento**: Otimizar uso de limites dispon√≠veis
- ‚úÖ **Compliance Proativo**: Evitar viola√ß√µes antes que aconte√ßam
- ‚úÖ **Visibilidade**: Entender cascata de consumo de espa√ßo

### DOCUMENTA√á√ÉO ATUALIZADA
- ‚úÖ **monitor_concentracao.py**: Exemplos de uso da an√°lise sequencial
- ‚úÖ **README.md**: Nova funcionalidade documentada no template
- ‚úÖ **CLAUDE.md**: Casos de uso e benef√≠cios explicados
- ‚úÖ **Sessions**: Implementa√ß√£o registrada para continuidade

### ‚úÖ **MATRIZ DE SOBRA TABULAR IMPLEMENTADA (16/07/2025)**

#### NOVA FUNCIONALIDADE NO MONITOR v2.2
- ‚úÖ **Fun√ß√£o `_gerar_matriz_sobra_tabular()`**: Cria√ß√£o de tabela ASCII formatada
- ‚úÖ **Fun√ß√£o `_formatar_tabela_ascii()`**: Formata√ß√£o de tabelas com bordas
- ‚úÖ **Integra√ß√£o completa**: Inclu√≠da automaticamente na an√°lise sequencial
- ‚úÖ **Visualiza√ß√£o clara**: Tabela ASCII com colunas organizadas

#### ESTRUTURA DA MATRIZ IMPLEMENTADA
```json
"matriz_sobra": {
  "cabecalho": {
    "titulo": "MATRIZ DE SOBRA - AN√ÅLISE SEQUENCIAL",
    "pl_pool": 8500000,
    "limite_individual": "27.0%",
    "limite_top_n": "100.0%",
    "espaco_disponivel": 1275000
  },
  "tabela_ascii": "‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇEntidade      ‚îÇAtual   ‚îÇCap.Indiv ‚îÇCap.Efetiva  ‚îÇSaldo Antes  ‚îÇLimitado Por   ‚îÇ\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\n‚îÇEmpresa ABC   ‚îÇ1200000 ‚îÇ+1095000  ‚îÇ+1095000     ‚îÇ1275000      ‚îÇindividual     ‚îÇ\n‚îÇEmpresa XYZ   ‚îÇ800000  ‚îÇ+1495000  ‚îÇ+180000      ‚îÇ180000       ‚îÇtop_n          ‚îÇ\n‚îÇEmpresa DEF   ‚îÇ600000  ‚îÇ+1695000  ‚îÇ+0           ‚îÇ0            ‚îÇesgotado       ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò"
}
```

#### CASOS DE USO ATENDIDOS
- ‚úÖ **Visualiza√ß√£o Clara**: Tabela ASCII f√°cil de ler no console
- ‚úÖ **An√°lise Gerencial**: Capacidade por entidade em formato tabular
- ‚úÖ **Limita√ß√µes Identificadas**: Mostra se restri√ß√£o √© individual ou top-N
- ‚úÖ **Planejamento**: Base para decis√µes de origina√ß√£o e gest√£o

#### DOCUMENTA√á√ÉO ATUALIZADA
- ‚úÖ **USAGE_EXAMPLES.md**: Nova se√ß√£o "Matriz de Sobra Tabular" com exemplos
- ‚úÖ **monitor_concentracao.py**: Vers√£o 2.2 com matriz implementada
- ‚úÖ **Funcionalidades testadas**: Gera√ß√£o de tabela ASCII validada
- ‚úÖ **Sessions**: Implementa√ß√£o completa documentada

## üî• **PRIORIDADE ALTA - Implementa√ß√£o Imediata**

### Monitores Base Restantes (4/5 conclu√≠dos)
- [ ] **Building Block 5**: Estrat√©gia `EconomicGroupConcentration` - Grupos econ√¥micos (Custom)
- [ ] `monitor_elegibilidade.py` - Crit√©rios gerais de elegibilidade  

### Corre√ß√µes T√©cnicas Cr√≠ticas
- [ ] **Corrigir c√°lculo IS**: De `JR/PL` para `JR/(SR+JR)` no monitor_subordinacao.py
- [ ] **Implementar tratamento de erros**: Pool espec√≠fico falha, outros continuam
- [ ] **Melhorar valida√ß√µes**: Casos edge, tipos, limites configurados
- [ ] **Corrigir f√≥rmula de aporte**: Revisar matem√°tica financeira

### Sistema de Hist√≥rico e Resultados
- [ ] Criar estrutura `/data/monitoring_results/` com subdiret√≥rios por pool
- [ ] Implementar `monitoring_history.json` acumulativo
- [ ] Sistema de compara√ß√£o com execu√ß√£o anterior
- [ ] Detec√ß√£o de mudan√ßas de status (ENQUADRADO ‚Üí DESENQUADRADO)
- [ ] An√°lise de tend√™ncias temporais

## üî∏ **PRIORIDADE M√âDIA - Pr√≥ximas 2-3 Sess√µes**

### Monitores Customizados (26+ identificados)
- [ ] `AFA_Pool_1_sacados_especificos.py` (limites BMP, SOCINAL)
- [ ] `SuperSim_Pool_1_recovery_rate.py` (taxa recupera√ß√£o 95%)
- [ ] `Up_Vendas_Pool_2_pix_parcelado.py` + 3 outros monitores
- [ ] `A55_Pool_2_monitores_especificos.py` (4 monitores customizados)
- [ ] `Credmei_Pool_1_monitores_especificos.py`
- [ ] `Formento_Pool_3_monitores_especificos.py`
- [ ] `ectare_pool_1_agronegocio.py` (opera√ß√µes agroneg√≥cio)
- [ ] `ectare_pool_1_cda_wa_garantias.py` (garantias CDA/WA 130%)
- [ ] `ectare_pool_1_cessoes_diretas.py` (cess√µes obrigat√≥rias)
- [ ] `ectare_pool_1_setores_agricolas.py` (setores pecu√°ria/caf√©/gr√£os)
- [ ] `ectare_pool_1_ancoras_eligible.py` (√¢ncoras pr√©-aprovadas)
- [ ] `ectare_pool_1_prazo_medio_redutivo.py` (cronograma redutivo)
- [ ] Total: 26+ monitores customizados mapeados

### üîÑ **APLICAR ESTRUTURA H√çBRIDA AOS POOLS EXISTENTES**
**‚ö†Ô∏è IMPORTANTE PARA PR√ìXIMAS SESS√ïES:** Aplicar estrutura `processos_legais` aos 8 pools

- [ ] **AFA Pool #1**: Analisar processos legais espec√≠ficos do agroneg√≥cio
  - Localiza√ß√£o: `/config/pools/AFA Pool #1.json`
  - Foco: Sacados espec√≠ficos (BMP, SOCINAL) + viola√ß√µes concentra√ß√£o
  - A√ß√£o: Adicionar se√ß√£o `processos_legais` conforme template v2.3

- [ ] **Credmei Pool #1**: Mapear eventos de acelera√ß√£o espec√≠ficos
  - Localiza√ß√£o: `/config/pools/Credmei Pool #1.json`
  - Foco: Eventos espec√≠ficos de microcr√©dito
  - A√ß√£o: Documentar processos p√≥s-viola√ß√£o da escritura

- [ ] **E-ctare Pool #1**: Processos agroneg√≥cio espec√≠ficos
  - Localiza√ß√£o: `/config/pools/E-ctare Pool #1.json`
  - Foco: Garantias CDA/WA, cess√µes diretas, setores agr√≠colas
  - A√ß√£o: 6 monitores customizados + processos legais detalhados

- [ ] **Formento Pool #3**: Revisar triggers existentes
  - Localiza√ß√£o: `/config/pools/Formento Pool #3.json`
  - Foco: Eventos espec√≠ficos do pool
  - A√ß√£o: Implementar estrutura h√≠brida

- [ ] **LeCapital Pool #1**: Atualizar documenta√ß√£o legal
  - Localiza√ß√£o: `/config/pools/LeCapital Pool #1.json`
  - Foco: Processos de viola√ß√£o espec√≠ficos
  - A√ß√£o: Documentar base legal completa

- [ ] **SuperSim Pool #1**: Processos recovery rate
  - Localiza√ß√£o: `/config/pools/SuperSim Pool #1.json`
  - Foco: Taxa recupera√ß√£o 95% + eventos espec√≠ficos
  - A√ß√£o: Processos legais para recovery rate

- [ ] **Up Vendas Pool #2**: Eventos PIX espec√≠ficos
  - Localiza√ß√£o: `/config/pools/Up Vendas Pool #2.json`
  - Foco: Substitui√ß√£o PIX‚ÜíURs + eventos espec√≠ficos
  - A√ß√£o: Processos legais para opera√ß√µes PIX

- [ ] **a55 Pool #2**: Analisar estrutura legal
  - Localiza√ß√£o: `/config/pools/a55 Pool #2.json`
  - Foco: 4 monitores customizados + processos
  - A√ß√£o: Implementar estrutura h√≠brida completa

### Sistema de Engine CLI (monitoring_engine.py)
- [ ] Implementar `monitoring_engine.py` como orquestrador principal
- [ ] Sistema de logging detalhado por pool
- [ ] Modos de execu√ß√£o: `--pool specific`, `--all`, `--debug`
- [ ] Argumentos CLI: `--date`, `--output-format`
- [ ] Integra√ß√£o com data_loader existente

### Valida√ß√£o e Qualidade
- [ ] Testes com pool piloto (LeCapital Pool #1 expandido)
- [ ] Valida√ß√£o de c√°lculos vs Excel manual
- [ ] Verifica√ß√£o de performance com 44 pools completos
- [ ] Testes de integra√ß√£o completa
- [ ] Expandir para todos os 44 pools

## üîπ **PRIORIDADE BAIXA - Implementa√ß√£o Futura**

### Sistema de An√°lise Preditiva
- [ ] An√°lise de tend√™ncias temporal avan√ßada
- [ ] Proje√ß√£o de fluxo de caixa futuro
- [ ] Dashboard executivo consolidado
- [ ] Sistema de alertas autom√°ticos

### Otimiza√ß√µes e Melhorias
- [ ] Cache inteligente para datasets grandes
- [ ] Otimiza√ß√£o de performance para 79k+ registros
- [ ] Exporta√ß√£o para m√∫ltiplos formatos
- [ ] Interface web para monitoramento

### Documenta√ß√£o Final
- [ ] Atualizar PRD: Se√ß√£o "Monitoramento Automatizado" completa
- [ ] Atualizar CLAUDE.md: Nova arquitetura completa
- [ ] Sincronizar m√©tricas finais

## üìä **M√âTRICAS DE PROGRESSO (Atualizado 15/07/2025)**
- **Monitores base implementados**: 4/5 (80% - Subordina√ß√£o ‚úÖ, Inadimpl√™ncia ‚úÖ, PDD ‚úÖ, Concentra√ß√£o ‚úÖ)
- **Pools auditados**: 9/44 (20% - UnionNational Pool #5 + E-ctare Pool #1 adicionados)
- **Arquitetura integrada**: ‚úÖ Funcional (4 monitores operacionais)
- **Sistema de enriquecimento**: ‚úÖ Operacional (dias_atraso, grupo_de_risco)
- **Sistema de descoberta**: ‚úÖ Funcional
- **Arquitetura inteligente**: ‚úÖ PDD implementado com depend√™ncia otimizada
- **L√≥gica por cedente**: ‚úÖ PDD com metodologia financeira correta
- **Documenta√ß√£o sincronizada**: ‚úÖ CLAUDE.md, PRD.md, sessions atualizados
- **Matriz Detalhada de Atrasos**: ‚úÖ Implementada com an√°lises por cedente/sacado
- **Aging Configur√°vel**: ‚úÖ Implementado com faixas baseadas em PDD (2025-07-15)
- **Drill-down Completo**: ‚úÖ detalhes_ativos_df ordenado por cedente/vencimento/valor (2025-07-15)
- **Limita√ß√£o CCB**: ‚úÖ Documentada completamente (c√≥digo + docs t√©cnicos)
- **Monitor de Concentra√ß√£o**: ‚úÖ Implementado com arquitetura simplificada (2025-07-15)
- **Monitores customizados**: 0/26+ (0% - E-ctare Pool #1 adicionou 6 monitores)
- **Sistema de hist√≥rico**: ‚ùå N√£o implementado
- **Engine CLI**: ‚ùå N√£o implementado

## üéØ **PR√ìXIMA A√á√ÉO RECOMENDADA**
**Monitor de Elegibilidade**: Pr√≥ximo monitor base a implementar
1. **Analisar crit√©rios**: Valor m√≠nimo/m√°ximo, vencimento, taxa m√≠nima
2. **Mapear valida√ß√µes**: Tipos permitidos, performa√ß√£o, registro
3. **Implementar validador**: Fun√ß√£o `run_eligibility_monitoring()`
4. **Integrar orquestrador**: Execu√ß√£o condicional autom√°tica
5. **Pr√≥ximo**: Building Block 5 (grupo econ√¥mico como custom)

## üöÄ **PARA PR√ìXIMA SESS√ÉO CLAUDE - LEIA ISTO PRIMEIRO**

### CONTEXTO ATUAL (15/07/2025 - 23:30)
- ‚úÖ **Union Pool #5**: Problema cr√≠tico RESOLVIDO (60%‚Üí70%)
- ‚úÖ **Estrutura h√≠brida**: Template v2.3 IMPLEMENTADO
- ‚úÖ **Arquitetura legal**: Documenta√ß√£o COMPLETA no CLAUDE.md
- üìÅ **Arquivos modificados**: `UnionNational Pool #5.json`, `README.md`, `CLAUDE.md`

### PR√ìXIMA A√á√ÉO IMEDIATA RECOMENDADA
1. **Verificar implementa√ß√£o**: Testar Union Pool #5 com novo limite 70%
2. **Aplicar estrutura**: Escolher 1-2 pools para implementar `processos_legais`
3. **Prioridade**: AFA Pool #1 ou E-ctare Pool #1 (j√° analisados)

### ARQUIVOS CHAVE PARA ENTENDER
- `/config/pools/UnionNational Pool #5.json` ‚Üí **Exemplo piloto** estrutura h√≠brida
- `/config/pools/README.md` ‚Üí **Template v2.3** com se√ß√£o `processos_legais`
- `/docs/CLAUDE.md` ‚Üí **Arquitetura h√≠brida** documentada
- Este arquivo ‚Üí **Contexto completo** do que foi feito

### ESTRUTURA H√çBRIDA IMPLEMENTADA
```json
"triggers_aceleracao": {           // Para sistema de monitoramento
  "concentracao_violacao": {
    "processo_detalhado_ref": "processos_legais.concentracao_violacao"
  }
},
"processos_legais": {              // Para compliance e auditoria
  "concentracao_violacao": {
    "pos_violacao": {
      "assembleia": {"convocacao_prazo_dias": 3},
      "votacao": {"votantes": "serie_senior"},
      "renuncia": {"prazo_dias": 5}
    }
  }
}
```

### PEND√äNCIAS ORGANIZADAS POR PRIORIDADE
- **ALTA**: Monitor elegibilidade + Building Block 5 (grupos econ√¥micos)
- **M√âDIA**: Aplicar estrutura h√≠brida aos 8 pools existentes
- **BAIXA**: 26 monitores customizados + Engine CLI

## üìù **NOTAS IMPORTANTES**
- **Estrutura h√≠brida**: Separa aspectos t√©cnicos (automa√ß√£o) de legais (compliance)
- **Template v2.3**: Padr√£o estabelecido para todos os novos pools
- **Union Pool #5**: Exemplo completo funcionando como refer√™ncia
- **Auditabilidade**: Rastro legal completo agora nos JSONs