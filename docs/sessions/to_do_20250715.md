# To-Do - 15/07/2025

## ‚úÖ **IMPLEMENTADO HOJE (15/07/2025)**

### Aging Configur√°vel + Drill-down Completo
- ‚úÖ **Faixas derivadas do PDD**: Sistema usa `provisoes_pdd.grupos_risco` de cada pool
- ‚úÖ **Up Vendas testado**: 8 faixas (1-15, 16-30, 31-60, 61-90, 91-120, 121-150, 151-180, 181+)
- ‚úÖ **Drill-down de ativos**: `detalhes_ativos_df` como DataFrame ordenado
- ‚úÖ **Ordena√ß√£o inteligente**: cedente (A-Z), vencimento (antigo primeiro), valor (maior primeiro)
- ‚úÖ **Compatibilidade**: Mant√©m `detalhes_ativos` como lista + novo DataFrame

### Documenta√ß√£o Limita√ß√£o CCB
- ‚úÖ **Monitor PDD atualizado**: Docstring com explica√ß√£o completa sobre CCB
- ‚úÖ **CLAUDE.md**: Se√ß√£o "Limita√ß√µes Conhecidas - CCB" adicionada
- ‚úÖ **PRD.md**: Funcionalidades recentes documentadas + limita√ß√£o CCB
- ‚úÖ **Documenta√ß√£o t√©cnica**: `/docs/technical/LOGICA_CCB_PDD.md` criado
- ‚úÖ **Status claro**: CCB n√£o implementada, sistema funciona apenas por cedente

### Arquivos Modificados
- `/monitor/base/monitor_inadimplencia.py` - Aging configur√°vel + drill-down
- `/monitor/base/monitor_pdd.py` - Docstring com limita√ß√£o CCB
- `/docs/CLAUDE.md` - Se√ß√µes atualizadas com novas funcionalidades
- `/docs/PRD.md` - Funcionalidades 2025-07-15 documentadas
- `/docs/technical/LOGICA_CCB_PDD.md` - Documenta√ß√£o t√©cnica CCB (novo)
- `/docs/sessions/to_do_20250715.md` - M√©tricas atualizadas

### Reorganiza√ß√£o de Arquivos (2025-07-15)
- ‚ùå **Removidos**: `config/monitoring/exampl_test_pools.json`, `example_ignore_pools.json`
- üìÅ **Movidos**: `docs/SYSTEM_STATE.md` ‚Üí `docs/technical/SYSTEM_STATE.md`
- üìÅ **Movidos**: `tests/test_*.py` ‚Üí `tests/integration/` (2 arquivos)
- üìö **Atualizados**: Refer√™ncias em CLAUDE.md, FRAMEWORK_DAILY_SYNC.md
- üéØ **Resultado**: Estrutura 90% otimizada e bem organizada

## üî• **PRIORIDADE ALTA - Implementa√ß√£o Imediata**

### Monitores Base Restantes (3/5 conclu√≠dos)
- [ ] `monitor_concentracao.py` - Concentra√ß√£o por sacado/cedente individual (FOCO RECOMENDADO)
- [ ] `monitor_elegibilidade.py` - Crit√©rios gerais de elegibilidade  

### Corre√ß√µes T√©cnicas Cr√≠ticas
- [ ] **Corrigir c√°lculo IS**: De `JR/PL` para `JR/(SR+JR)` no monitor_subordinacao.py
- [ ] **Implementar tratamento de erros**: Pool espec√≠fico falha, outros continuam
- [ ] **Melhorar valida√ß√µes**: Casos edge, tipos, limites configurados
- [ ] **Corrigir f√≥rmula de aporte**: Revisar matem√°tica financeira

### Sistema de Hist√≥rico e Resultados
- [ ] Criar estrutura `/data/monitoring_results/` com subdiret√≥rios por pool
- [ ] Implementar `monitoring_history.json` acumulativo
- [ ] Sistema de compara√ß√£o com execu√ß√£o anterior
- [ ] Detec√ß√£o de mudan√ßas de status (ENQUADRADO ‚Üí DESENQUADRADO)
- [ ] An√°lise de tend√™ncias temporais

## üî∏ **PRIORIDADE M√âDIA - Pr√≥ximas 2-3 Sess√µes**

### Monitores Customizados (20+ identificados)
- [ ] `AFA_Pool_1_sacados_especificos.py` (limites BMP, SOCINAL)
- [ ] `SuperSim_Pool_1_recovery_rate.py` (taxa recupera√ß√£o 95%)
- [ ] `Up_Vendas_Pool_2_pix_parcelado.py` + 3 outros monitores
- [ ] `A55_Pool_2_monitores_especificos.py` (4 monitores customizados)
- [ ] `Credmei_Pool_1_monitores_especificos.py`
- [ ] `Formento_Pool_3_monitores_especificos.py`
- [ ] Total: 20+ monitores customizados mapeados

### Sistema de Engine CLI (monitoring_engine.py)
- [ ] Implementar `monitoring_engine.py` como orquestrador principal
- [ ] Sistema de logging detalhado por pool
- [ ] Modos de execu√ß√£o: `--pool specific`, `--all`, `--debug`
- [ ] Argumentos CLI: `--date`, `--output-format`
- [ ] Integra√ß√£o com data_loader existente

### Valida√ß√£o e Qualidade
- [ ] Testes com pool piloto (LeCapital Pool #1 expandido)
- [ ] Valida√ß√£o de c√°lculos vs Excel manual
- [ ] Verifica√ß√£o de performance com 44 pools completos
- [ ] Testes de integra√ß√£o completa
- [ ] Expandir para todos os 44 pools

## üîπ **PRIORIDADE BAIXA - Implementa√ß√£o Futura**

### Sistema de An√°lise Preditiva
- [ ] An√°lise de tend√™ncias temporal avan√ßada
- [ ] Proje√ß√£o de fluxo de caixa futuro
- [ ] Dashboard executivo consolidado
- [ ] Sistema de alertas autom√°ticos

### Otimiza√ß√µes e Melhorias
- [ ] Cache inteligente para datasets grandes
- [ ] Otimiza√ß√£o de performance para 79k+ registros
- [ ] Exporta√ß√£o para m√∫ltiplos formatos
- [ ] Interface web para monitoramento

### Documenta√ß√£o Final
- [ ] Atualizar PRD: Se√ß√£o "Monitoramento Automatizado" completa
- [ ] Atualizar CLAUDE.md: Nova arquitetura completa
- [ ] Sincronizar m√©tricas finais

## üìä **M√âTRICAS DE PROGRESSO (Atualizado 15/07/2025)**
- **Monitores base implementados**: 3/5 (60% - Subordina√ß√£o ‚úÖ, Inadimpl√™ncia ‚úÖ, PDD ‚úÖ)
- **Pools auditados**: 7/44 (16%) 
- **Arquitetura integrada**: ‚úÖ Funcional (3 monitores operacionais)
- **Sistema de enriquecimento**: ‚úÖ Operacional (dias_atraso, grupo_de_risco)
- **Sistema de descoberta**: ‚úÖ Funcional
- **Arquitetura inteligente**: ‚úÖ PDD implementado com depend√™ncia otimizada
- **L√≥gica por cedente**: ‚úÖ PDD com metodologia financeira correta
- **Documenta√ß√£o sincronizada**: ‚úÖ CLAUDE.md, PRD.md, sessions atualizados
- **Matriz Detalhada de Atrasos**: ‚úÖ Implementada com an√°lises por cedente/sacado
- **Aging Configur√°vel**: ‚úÖ Implementado com faixas baseadas em PDD (2025-07-15)
- **Drill-down Completo**: ‚úÖ detalhes_ativos_df ordenado por cedente/vencimento/valor (2025-07-15)
- **Limita√ß√£o CCB**: ‚úÖ Documentada completamente (c√≥digo + docs t√©cnicos)
- **Monitores customizados**: 0/20+ (0%)
- **Sistema de hist√≥rico**: ‚ùå N√£o implementado
- **Engine CLI**: ‚ùå N√£o implementado

## üéØ **PR√ìXIMA A√á√ÉO RECOMENDADA**
**Implementar `monitor_concentracao.py`** com:
1. **Concentra√ß√£o Individual**: Sacado/cedente vs limite configurado
2. **Concentra√ß√£o Top-N**: Top 10 sacados/cedentes vs limite
3. **Grupos econ√¥micos**: Incluir empresas do mesmo grupo
4. **Valida√ß√µes**: Limites por pool, casos edge
5. **Interface padr√£o**: `run_concentration_monitoring()`

## üìù **NOTAS IMPORTANTES**
- Foco em completar os monitores base antes de partir para customizados
- Sistema de tratamento de erros √© cr√≠tico para robustez
- Corre√ß√£o do c√°lculo IS √© importante para acur√°cia
- Monitor de concentra√ß√£o √© o pr√≥ximo passo l√≥gico na sequ√™ncia