# To-Do Session - 2025-07-12

## Contexto da Sess√£o
Continua√ß√£o do desenvolvimento do sistema de monitoramento. Foco principal: defini√ß√£o e implementa√ß√£o de estrat√©gia de tratamento de erros no orquestrador.

## Status Anterior
- ‚úÖ Monitor de subordina√ß√£o 100% implementado e testado
- ‚úÖ Orquestrador de subordina√ß√£o implementado com logging e alertas
- ‚úÖ Testes unit√°rios aprovados (4 testes por pool)
- ‚úÖ Documenta√ß√£o atualizada

## Tarefas da Sess√£o

### ‚úÖ Conclu√≠do
- [x] **Definir estrat√©gia de tratamento de erros no orquestrador**
  - Categoriza√ß√£o por severidade (CR√çTICOS, ALTOS, BAIXOS)
  - A√ß√µes espec√≠ficas para cada tipo de erro
  - Sistema de retry para erros tempor√°rios
  
- [x] **Atualizar CLAUDE.md com estrat√©gia de tratamento de erros**
  - Se√ß√£o detalhada de tratamento de erros
  - Status de implementa√ß√£o atualizado
  - M√©tricas de progresso atualizadas
  - Data da sess√£o atualizada

### üîÑ Em Progresso
- [ ] **Implementar classes de erro espec√≠ficas no orquestrador**
  - Enum de severidade de erros
  - Classes customizadas para cada tipo de erro
  - Integra√ß√£o com orquestrador existente

### üìã Pr√≥ximas Tarefas
- [ ] **Adicionar sistema de retry para erros tempor√°rios**
  - Backoff exponencial (1s, 2s, 4s)
  - M√°ximo 3 tentativas
  - Log detalhado de tentativas
  
- [ ] **Criar monitoring_engine.py**
  - Orquestra√ß√£o de todos os monitores
  - Execu√ß√£o em paralelo por pool
  - Consolida√ß√£o de resultados
  
- [ ] **Implementar monitor_concentracao.py**
  - Segundo monitor base
  - Top N concentra√ß√£o
  - Valida√ß√£o de limites

## Decis√µes T√©cnicas Tomadas

### Estrat√©gia de Tratamento de Erros
**Categoriza√ß√£o por Severidade:**

1. **üî• CR√çTICOS (Parar execu√ß√£o completa):**
   - Data source indispon√≠vel (CSV n√£o encontrado)
   - Sistema de logging falhando
   - Configura√ß√£o global corrompida
   - **A√ß√£o**: `return {"sucesso": false, "erro_critico": true}`

2. **‚ö†Ô∏è ALTOS (Log detalhado + Continue pr√≥ximo pool):**
   - Pool sem JSON de configura√ß√£o
   - Dados malformados em pool espec√≠fico
   - C√°lculo com divis√£o por zero
   - **A√ß√£o**: Log erro + marcar pool como "erro" + continuar

3. **üí° BAIXOS (Log simples + Continue):**
   - Campos opcionais ausentes
   - Valores fora do range esperado
   - Timeouts tempor√°rios
   - **A√ß√£o**: Log warning + continuar processamento

### Implementa√ß√£o no Orquestrador
- Erros de pool individual: Continue com pr√≥ximo pool
- Erros de sistema: Parar execu√ß√£o imediatamente
- Erros tempor√°rios: Retry autom√°tico (3x com backoff)

## Arquivos Modificados
- `/mnt/c/amfi/docs/CLAUDE.md` - Atualizado com estrat√©gia de erros e status
- `/mnt/c/amfi/docs/sessions/to_do_20250712.md` - Criado (este arquivo)

## Pr√≥xima Sess√£o
**Foco**: Implementa√ß√£o de classes de erro espec√≠ficas e sistema de retry
**Prioridade**: Alta para classes de erro, m√©dia para retry autom√°tico

## M√©tricas Atuais
- **Monitores base implementados**: 1/5 (monitor_subordinacao.py)
- **Orquestradores implementados**: 1/6 (subordina√ß√£o)
- **Eventos implementados**: 2/24 (subordina√ß√£o m√≠nimo e cr√≠tico)
- **Taxa de sucesso dos testes**: 100% (pools de teste)

## Observa√ß√µes
- Sistema de monitoramento de subordina√ß√£o est√° 100% funcional
- Orquestrador implementado segue princ√≠pios SOLID
- Estrat√©gia de erros bem definida e documentada
- Pr√≥ximo passo: expandir para outros monitores (concentra√ß√£o, inadimpl√™ncia)